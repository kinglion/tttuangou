<!--{template @admin/header}-->
{~ui('loader')->addon('editor.kind')}
<form id="main_form" action="?mod=html&code=save" method="post" enctype="multipart/form-data" onsubmit="return submitCheck();"> <table cellspacing="1" cellpadding="4" width="100%" align="center" class="tableborder"> <tr class="header"> <td colspan="2">é™æ€é¡µé¢ç¼–è¾?/ [ <a href="?mod=html&code=front">è¿”å›</a> ]</td> </tr> <tr> <td class="td_title" width="60">æ–‡ä»¶æ ‡è®°ï¼?/td> <td>
{if $html['name']}<input type="hidden" name="name" value="{$html['name']}" />{$html['name']}{else}<input id="page_flag" type="text" name="name" size="32" />&nbsp;&nbsp;&nbsp;<font id="check_status"></font>{/if}
</td> </tr> <tr> <td class="td_title">é¡µé¢æ ‡é¢˜ï¼?/td> <td> <input type="text" name="title" value="{$html['title']}" size="64" /> </td> </tr> <tr> <td class="td_title">è¯¦æƒ…ï¼?/td> <td> <textarea id="editor" name="content" style="height:300px;width:100%;">{echo htmlspecialchars($html['content'])}</textarea> </td> </tr> </table> <br/> <center> <input type="submit" name="addsubmit" value="æ?äº? class="button" /> </center> </form> <script type="text/javascript">
var flag_passd = {echo $html['name'] ? 'true' : 'null'};
$(document).ready(function(){
KE.show({id:'editor'});
$('#page_flag').bind('blur', function(){page_flag_check(false)});
});
function page_flag_check(autoSubmit)
{
flag_passd = null;
$('#check_status').html('æ­£åœ¨æ£€æŸ¥æ ‡è®°æ˜¯å¦å¯ç”?..').css('color', '#999');
$.get('?mod=html&code=check&op=flag&flag='+$('#page_flag').val()+$.rnd.stamp(), function(data){
if (data == 'true')
{
flag_passd = true;
$('#check_status').html('æ­¤æ ‡è®°å¯ä»¥ä½¿ç”¨ï¼').css('color', 'green');
if (autoSubmit)
{
$('#main_form').submit();
}
}
else
{
flag_passd = false;
$('#check_status').html(data).css('color', 'red');
}
});
}
function submitCheck()
{
if (flag_passd)
{
return true;
}
if (flag_passd == null)
{
page_flag_check(true);
}
return false;
}
</script> <!--{template @admin/footer}-->