<!--{template @admin/header}--> <script type="text/javascript" src="./static/js/jquery.js"></script> <form method="post" action="admin.php?mod=tttuangou&code=mailcron&op=dels"> <table cellspacing="1" cellpadding="4" width="100%" class="tableborder"> <tr class="header"> <td>æ›´æ–°ç¼©ç•¥å›?/td> </tr> <tr> <td>
å¦‚æœæ‚¨è°ƒæ•´äº†ç¼©ç•¥å›¾è®¾ç½®ï¼Œè¿™é‡Œå¯ä»¥æ›´æ–°ä¹‹å‰çš„ç¼©ç•¥å›¾ï¼Œæ³¨æ„æ›´æ–°æœŸé—´è¯·ä¸è¦å…³é—­æµè§ˆå™¨ã€?br/> <b>æœ¬æ¬¡æ›´æ–°å°†ä¼šæŠŠæ‰€æœ‰çš„äº§å“å›¾ç‰‡ç¼©ç•¥å›¾æ›´æ–°ä¸ºï¼?/b><br/>
å®½ï¼š<font color="red">{$thumbwidth}</font> x é«˜ï¼š<font color="red">{$thumbheight}</font> - - - - ( æ‚¨å¯ä»?b><a href="admin.php?mod=tttuangou&code=varshow">ç‚¹å‡»è¿™é‡Œ</a></b>æ¥è®¾ç½®ç¼©ç•¥å›¾å¤§å° )
</td> </tr> <tr> <td> <div style="width:600px;height:10px;border:1px solid #000;"> <div id="cr_bar" style="width:0px;height:10px;background:#000;"></div> </div>
[ <font id="cr_sends">0</font> / {$cronLength} ] &gt;&gt;&gt; <font id="cr_perc">0</font> %
</td> </tr> <tr> <td> <input id="cr_control" type="button" value="å¼€å§? class="button" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font id="cr_status">åˆå§‹åŒ–ä¸­...</font> </td> </tr> </table> </form> <script tyle="text/javascript">
var gf_url = 'admin.php?mod=tttuangou&code=imagethumb&op=run&od=';
var gf_runs = false;
var gf_sends = 0;
var gf_total = {$cronLength};
$(document).ready(function(){
$('#cr_status').text('è¯·ç‚¹å‡»å·¦è¾¹çš„æŒ‰é’®å¼€å§‹æ›´æ–°ç¼©ç•¥å›¾');
$('#cr_control').bind('click', function(){
if (!gf_runs)
{
gf_runs = true;
$('#cr_control').val('æš‚åœ');
reBuildRun();
}
else
{
gf_runs = false;
$('#cr_control').val('ç»§ç»­');
}
});
});
function reBuildRun()
{
if (!gf_runs) return;
$.get(gf_url+gf_sends, function(data){
$('#cr_status').html(data);
gf_sends ++;
if (gf_sends >= gf_total)
{
alert('æ›´æ–°å®Œæˆï¼?);
gf_runs = false;
gf_sends = gf_total;
reBuildDisplayer();
$('#cr_control').val('å®Œæˆ');
$('#cr_control').unbind('click');
$('#cr_status').text('å·²ç»å®Œæˆäº†å¯¹æ‰€æœ‰äº§å“å›¾ç‰‡ç¼©ç•¥å›¾çš„æ›´æ–°ï¼');
}
else
{
reBuildDisplayer();
setTimeout(reBuildRun, 300);
}
});
}
function reBuildDisplayer()
{
var prc = (gf_sends/gf_total).toFixed(2);
var cr_bar = Math.round(prc*600);
var cr_perc = Math.round(prc*100);
$('#cr_bar').css('width', cr_bar+'px');
$('#cr_sends').text(gf_sends);
$('#cr_perc').text(cr_perc);
}
</script>
{template @admin/footer}